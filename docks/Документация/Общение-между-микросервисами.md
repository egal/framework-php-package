Микросервисы общаются не только со внешним миром через микросервис web, но и друг с другом. Для этого существует специальная аутентификация для микросервисов на сервисе аутентификации, а так же отдельная библиотека для этого. Таким образом реализуется паттерн смешанный тип общения.

Обратиться от одного микросервиса к другому можно при помощи следующего кода:

```php
$send = Session::getSendRequest();
$message = $send->createMessage('ModelName', 'action');
$message->setData($arrayWithMethodParams);
$send->send('service', $message);
```

При этом аутентификация и авторизация будут произведены автоматически. Для сервисаов есть общая системная роль @service и для них используется такой же RBAC, как и для пользователей, роли пользователей и микросервисов могут пересекаться. Третьим параметром методу send() можно указать очередь, через которую будет направлено сообщение.

Стоит иметь ввиду, что при запросе от одного микросервиса к другому, идёт обращение сначала к сервису аутентификации. Если сервис не может быть авторизован, тогда вернётся ошибка. Нужно понимать, что ошибки транслируются между сервисами. Если ошибка возникла на сервисе аутентификации, то микросервис вернёт эту ошибку как свою, поэтому нужно идти по цепочке до изначального микросервиса.

Сообщение можно отправить самом самому себе, чтобы поставить в очередь процесс обработки. Для этого не нужно обращаться к сервису аутентификации, система смотрит на отправителя, если отправитель это тот же самый микросервис, то идёт расшифровка Message::$data паролем сервиса, если расшифрование прошло успешно - значит обработка запроса будет произведена. Рекомендуется включать в это поле объект. Для посланий самому себе используется роль @self.