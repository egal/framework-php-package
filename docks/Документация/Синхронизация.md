Возможность синхронизации данных от мастер-сервиса на дочерние сервисы нужна для передачи и хранения части данных на других сервисах без регулярных запросов между ними. Например, система аутентификации и мессенджер, где в последнем используется ФИО. Таким образом обеспечивается более стабильная работа системы в случае отказа одного из микросервисов.

Синхронизация настраивается в метаданных основной сущности, от которой будет идти синхронизация на другие сервисы. Для этого есть следующие параметры:

* ```$syncFields``` - поля для синхронизации в виде 'микросервис' => ['поля', 'для', 'передачи']
* ```$syncMode``` - режим синхронизации - синхронный или асинхронный ```SyncType::SYNC``` и ```SyncType::ASYNC``` соответственно
* ```$syncQueue``` - имя очереди для синхронизации

Синхронизация может быть синхронной или асинхронной. Синхронный вариант передаёт напрямую микросервисам объект для синхронизации. В случае асинхронного режима, создаётся задача для запуска синхронизации и она обработается как только подойдёт её очередь.

Идентификатор основной сущности сохраняется в дочерних в поле ```sync_id```. Название модели на обоих сервисах должно совпадать. Если мы синхронизируем сущность User, то на всех синхронизируемых микросервисах эта сущность так и должна называться.

Синхронизация производится автоматически в процессе создания, обновления или удаления сущности. Имейте ввиду, что это не относится к ручному добавлению при помощи SQL-запроса. Для ручной синхронизации сущности используйте методы сущности startAsyncSyncing() для асинхронного обновления или syncLocalChanges() для синхронного. Методам в качестве параметра передаётся одна из констант:

* ```SyncMessage::ACTION_CREATE``` - создание объекта
* ```SyncMessage::ACTION_UPDATE``` - обновление объекта
* ```SyncMessage::ACTION_DELETE``` - удаление объекта
* ```SyncMessage::ACTION_MIXED``` - смешанный тип, если не существует - будет создан, иначе обновлён, требует больше времени на исполнение

Указав очередь сообщений, можно так же сделать синхронизацию более синхронной. Это значит, что для синхронизации данных на конечном сервисе будет использоваться конкретная очередь и все изменения будут внесены по порядку. Такое требуется в случае, если нужна поочерёдная синхронизация разных сущностей.

Существует ручной режим синхронизации, который нужен для передачи всех данных микросервису и/или их обновлению в случае какого-либо сбоя или первоначальной инициализации. Делается это консольной командой ```artisan sync ModelName```. В процессе ручной синхронизации объекты на конечном сервисе не удаляются.